<!doctype html>
<html>
  <head>
    <meta charset="utf-8">

    <!-- Always force latest IE rendering engine or request Chrome Frame -->
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">

    <!-- Use title if it's in the page YAML frontmatter -->
    <title>Using Jenkins to Deploy</title>

    <link href="/stylesheets/master.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="/stylesheets/style.css" media="screen" rel="stylesheet" type="text/css" />
    <script src="/javascripts/all.js" type="text/javascript"></script>
    <link href='/images/favicon.ico' rel='shortcut icon'>
    <script type="text/javascript">
      $(document).ready(function(){
        $('a#search').click(function () {
          $('#organization_bar .navbar .nav>li a').css("padding","11px 20px 8px");
          $('#organization_bar .navbar .nav>li a#docs').css("padding","14px 20px");
          $('#organization_bar .navbar .nav>li a#search2').css("padding","11px 10px 8px");
          $('#search-on').show();
          $('#search-off').hide();
        });
        $('.cancel-x').click(function () {
          $('#organization_bar .navbar .nav>li a').css("padding","11px 63px 8px");
          $('#organization_bar .navbar .nav>li a#docs').css("padding","14px 20px");
          $('#organization_bar .navbar .nav>li a#search2, #organization_bar .navbar .nav>li a#search').css("padding","16px 20px 15px");
          $('#organization_bar .navbar .nav>li a#getinvolved').css("padding","11px 92px 8px");
          $('#organization_bar .navbar .nav>li#docs-off .docs-list-list a').css("padding","0");
          $('#search-on').hide();
          $('#search-off').show();
        });f
        $(".togglebutton").click(function () {
        var divname= this.value;
          $("#"+divname).show("slow").siblings().hide("slow");
        });
      });
    </script>

    <!--[if lt IE 9]>
    <style>
        #content .container-full {background:  #ebf0fa;}
        .call-to-contribute-box, .column-left, .column-middle, .column-right {background:#e3e8f2}
        #footer {background:#000;}
    </style>
    <![endif]-->
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-22181585-1']);
      _gaq.push(['_setDomainName', 'cloudfoundry.com']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </head>

  <body class="docs docs_dotcom docs_dotcom_integration docs_dotcom_integration_cloudbees docs_dotcom_integration_cloudbees_jenkins-cloudbees-using">
    <img id="bg" src="/images/bg-plain-x.jpg">
    <div id='non_footer'>
      <div id='content'>
            <div class="text-center" style="background: url(/images/bg-crowd.png);background-position:center bottom;background-repeat:no-repeat">
                <img src="/images/logo_org.png">
            </div>
          <br></br>
        <div class='container-full'>
          <div id='organization_bar'>
            <div class='navbar'>
              <ul class='nav'>
                            <li id='icon-home-li'>
                                <a id='icon-home-link' href='/'>
                                    <img id='icon-home' src='http://blog.cloudfoundry.com/wp-content/static/cforg/img/icon-home.png'>
                                </a>
                            </li>
                            <li>
                                <a id='about' href='http://www.cloudfoundry.org/about.html'>About</a>
                            </li>
                            <li>
                                <a id='learn' href='http://www.cloudfoundry.org/learn.html'>Learn</a>
                            </li>
                            <li>
                                <a href='http://www.cloudfoundry.org/documentation.html'>Documentation</a>
                            </li>
                            <li>
                                <a id='get-involved' href='http://www.cloudfoundry.org/getinvolved.html'>Get Involved</a>
                            </li>

                <li id='docs-off'>
                    <!--
                  <a href='/' id='docs'>
                    <div id='icon-docs'></div>
                  </a>
                     -->
                  <div id='docs-list'>
                    <div class="docs-list-list">
                      <a class="docs-list-th" href='/docs/using/app-arch/'>Using Cloud Foundry</a>
                      <br>
                      <a href="/docs/using/app-arch/">Application Architecture Considerations</a>
                      <br>
                      <a href='/docs/using/deploying-apps/'>Deploying Apps</a>
                      <br>
                      <a href='/docs/using/managing-apps/'>Managing Apps</a>
                      <br>
                      <a href='/docs/using/services.html'>Using Services</a>
                      <br>
                      <a class="docs-list-see-all" href="/docs/using/">See all</a>
                    </div><!-- End of 1st column docs-list-list-->
                    <div class="hr-vertical"></div>
                    <div class="docs-list-list">
                      <a class="docs-list-th" href='/docs/running/'>Running Cloud Foundry</a>
                      <br>
                      <a href='/docs/running/architecture/'>Architecture</a>
                      <br>
                      <a href='/docs/running/bosh/'>BOSH</a>
                      <br>
                      <a href='/docs/running/deploying-cf/'>Deploying with BOSH</a>
                      <br>
                      <a href='/docs/running/deploying-cf-with-chef/'>Deploying with Chef</a>
                      <br>
                      <a href='/docs/running/micro_cloud_foundry/'>Micro Cloud Foundry</a>
                      <br>
                      <a href='/docs/running/managing-cf/index.html'>Managing Cloud Foundry</a>
                      <br>
                      <a class="docs-list-see-all" href="/docs/running/">See all</a>
                    </div><!-- End of column 2 docs-list-list -->
                    <div class="hr-vertical"></div>
                    <div class="docs-list-list">
                      <a class="docs-list-th" href='/docs/reference/'>Reference</a>
                      <br>
                      <a href='/docs/reference/cc-api.html'>Cloud Foundry REST API</a>
                      <br>
                      <a class="docs-list-th" href='/docs/dotcom/'>CloudFoundry.com</a>
                      <br>
                      <a href='/docs/dotcom/integration/'>Technical Integration</a>
                      <br>
                      <a class="docs-list-th" href='/docs/community/'>Community</a>
                    </div><!-- End of column 3 docs-list-list -->
                  </div><!-- End of docs-list -->
                </li>
                  <!--
                <li id='search-off'>
                  <a id='search'>
                    <div class='icon-search'></div>
                  </a>
                </li>
                <li id='search-on'>
                  <a id='search2'>
                    <form action='http://www.cloudfoundry.com/search' class='search-form' method='get' onsubmit='return submitQuery()'>
                      <input autocomplete='off' class='search-input' id='search-query' name='q' onfocus="this.placeholder = ''" placeholder='' type='search' value=''>
                    </form>
                    <div class="cancel-x"></div>
                  </a>
                </li>
                  -->
              </ul>
            </div><!-- End of navbar -->
          </div><!-- End of organization_bar -->
          <div class='content_inner'>
            <a class="forkme" href="http://github.com/cloudfoundry/cf-docs" target="_blank">
              <img alt="Fork me on GitHub" src="/images/ribbon_forkme.png">
            </a>
            <form action='http://www.cloudfoundry.com/search' class='search-docs-form' method='get' onsubmit='return submitQuery()'>
              <input autocomplete='off' class='search-docs-input' id='search-query' name='q' onfocus="this.placeholder = 'more:docs '" placeholder='' type='search-docs' value='more:docs '>
            </form>
            <br clear="left">
            
              <div class="breadcrumbs">
                <ul>
                  <li>
                    <a href="/">Home</a>
                  </li>
                  <li class=""><a href="/docs/dotcom/">Pivotal CF Hosted</a></li> <li class=""><a href="/docs/dotcom/integration/">Technical Integration</a></li> <li class=""><a href="/docs/dotcom/integration/cloudbees/">CloudBees DEV@cloud</a></li> <li class="active"><span>Using Jenkins to Deploy</span></li>
                </ul>
              </div>
              <br clear="left">

			

              <div class="quick-links"><ul>
<li><a href="#prerequisites">Prerequisites</a></li>
<li><a href="#config">Configuring a Job</a></li>
<li><a href="#troubleshooting">Troubleshooting</a></li>
</ul>
</div>

              <h1>Using Jenkins to Deploy</h1>

            
            <p>Jenkins can push applications to CloudFoundry.com after a successful build. This guide will show the process for configuring a Jenkins job to push to CloudFoundry.com.</p>

<ul>
<li><a href="#prerequisites">Prerequisites</a></li>
<li><a href="#config">Configuring a Job</a></li>
<li><a href="#troubleshooting">Troubleshooting</a></li>
</ul>

<h2><a id='prerequisites'></a>Prerequisites</h2>

<p>This guide will show how to configure an existing CloudBees Jenkins job to push an application to CloudFoundry.com. Before this can be done, the follow steps should be completed:</p>

<ul>
<li>The source code for the application should be in a public git or subversion repository (e.g. <a href="http://www.github.com">GitHub</a>, <a href="https://bitbucket.org/">BitBucket</a>, <a href="http://code.google.com/hosting/">Google Code</a> or <a href="http://www.cloudbees.com/">CloudBees Forge</a>).</li>
<li>A Jenkins job should be created and configured to successfully build the application. See the <a href="http://developer.cloudbees.com/bin/view/DEV/Getting+started+with+Jenkins">CloudBees Jenkins documentation</a> for help creating the initial Jenkins job.</li>
</ul>

<h2><a id='config'></a>Configuring a Job</h2>

<p>Follow these steps to configure an existing Jenkins job to push an application to CloudFoundry.com.</p>

<p>Starting from the Jenkins Dashboard, click on the project name to view the project details:</p>

<p><img src="/images/dotcom/integration/cloudbees/jenkins-dashboard.png" /></p>

<p>From the project page, click on the &ldquo;Configure&rdquo; link:</p>

<p><img src="/images/dotcom/integration/cloudbees/jenkins-project.png" /></p>

<p>Scroll to the bottom of the project configuration page. Click on the &ldquo;Add post-build action&rdquo; button, and select &ldquo;Deploy applications&rdquo; from the presented list.</p>

<p><img src="/images/dotcom/integration/cloudbees/jenkins-project-configure-1.png" /></p>

<p><img src="/images/dotcom/integration/cloudbees/jenkins-project-configure-2.png" /></p>

<p>Look for the &ldquo;Cloud Foundry&rdquo; section added to the page:</p>

<p><img src="/images/dotcom/integration/cloudbees/jenkins-project-configure-3.png" /></p>

<p>Fill out the form fields as follows:</p>

<ul>
<li><strong>Target API end-point</strong>: Enter the URL for the Cloud Foundry environment&#39;s Cloud Controller.</li>
<li><strong>Credentials</strong>: Choose the CloudBees account that you previously linked to your CloudFoundry.com account.</li>
<li><strong>Application Name</strong>: Enter a name for the application. This name must be unique to your Cloud Foundry account.</li>
<li><strong>Deployment Hostname</strong>: Enter the URL that will be used to access the application. It must be unique across CloudFoundry.com.</li>
<li><strong>Application Type</strong>: Choose the option appropriate for the application.</li>
<li><strong>Runtime</strong>: Choose the option appropriate for the application</li>
<li><strong>Number of Instances</strong>: Enter the number of instances of the application that should be started on Cloud Foundry.</li>
<li><strong>Memory Reservation</strong>: Choose the amount of memory that Cloud Foundry should allocate to the application.</li>
<li><strong>Start application on deployment</strong>: Check if Cloud Foundry should start the application after it is pushed.</li>
</ul>

<p>If the application requires services (a database, document store, key-value store, or messaging system), click on the &ldquo;Add service&rdquo; button. Additional fields will be added to the form:</p>

<p><img src="/images/dotcom/integration/cloudbees/jenkins-project-configure-4.png" /></p>

<p>Fill out the additional form fields as follows:</p>

<ul>
<li><strong>Service name</strong>: Enter a name for the service. This name must be unique to your Cloud Foundry account.</li>
<li><strong>Service type</strong>: Choose the appropriate service type from the list.</li>
<li><strong>Service version</strong>: Choose a service version from the list.</li>
</ul>

<p>You can add as many services as necessary for your application by clicking the &ldquo;Add service&rdquo; button multiple times.</p>

<p>After you are done adding the Cloud Foundry configuration to the Jenkins job, press the &ldquo;Save&rdquo; button. You will be returned to the project details page, where you can click the &ldquo;Build Now&rdquo; link to start a build of the project.</p>

<h2><a id='troubleshooting'></a>Troubleshooting</h2>

<h3>&ldquo;Operation not permitted&rdquo; error</h3>

<p>If you receive an &ldquo;Operation not permitted&rdquo; exception when pushing an application from Jenkins, your Cloud Foundry authorization may have expired. In such an event, you should receive an email from CloudBees informing you of this. Regardless, you can login to <a href="https://cloudfoundry.cloudbees.com">cloudfoundry.cloudbees.com</a> and re-authorize CloudBees to deploy applications on your behalf.</p>

<h3>&ldquo;External URIs are not enabled for this account&rdquo; error</h3>

<p>If you receive an HTTP error code 503 with a message stating &ldquo;External URIs are not enabled for this account&rdquo; when pushing an application from Jenkins, double check the format and contents of the &ldquo;Deployment URL&rdquo; field in your Cloud Foundry Jenkins deployer configuration. This URL must include the &ldquo;cloudfoundry.com&rdquo; domain, and must not contain illegal characters.</p>

<h3>Support</h3>

<p>If you have problems with your CloudBees Jenkins, you can ask questions on the <a href="http://stackoverflow.com/tags/cloudbees">CloudBees Stackoverflow tag</a>. Other DEV@cloud support options are available in the &ldquo;More&rdquo; tab of the toolbar located at the top of each Jenkins screen.</p>

          </div><!-- End of content_inner -->
        </div><!-- End of container-full -->
      </div><!-- End of content -->
    </div><!-- End of non_footer -->
    <div id='footer'>
      <div id='container-footer'>
        <div class='bg_social'>
          <ul class='social'>
            <li>
            <a href='http://twitter.com/cloudfoundry' target='_blank'>
            <img alt='Twitter' src='/images/twitter_large.png'>
            </a>
            </li>
            <li>
            <a href='https://plus.google.com/114245065906861739918/posts' target='_blank'>
            <img alt='Google+' src='/images/g+_large.png'>
            </a>
            </li>
            <li>
            <a href='http://facebook.com/cloudfoundry' target='_blank'>
            <img alt='Facebook' src='/images/facebook_large.png'>
            </a>
            </li>
            <li>
            <a href='http://youtube.com/cloudfoundry' target='_blank'>
            <img alt='Youtube' src='/images/youtube_large.png'>
            </a>
            </li>
          </ul>
        </div><!-- End of bg_social -->
        <ul class='links'>
                <li>
                    <a href='http://www.cloudfoundry.org/about.html'>About</a>
                </li>
                <li class='disc'>•</li>
                <li>
                    <a href='http://www.cloudfoundry.org/blog.html'>Blog</a>
                </li>
                <li class='disc'>•</li>
                <li>
                    <a href='http://www.cloudfoundry.org/about.html'>Partners</a>
                </li>
                <li class='disc'>•</li>
                <li>
                    <a href='http://www.cloudfoundry.org/documentation.html'>Docs</a>
                </li>
                <li class='disc'>•</li>
                <li>
                    <a href='http://www.cloudfoundry.org/faq.html'>FAQ</a>
                </li>
                <li class='disc'>•</li>
                <li>
                    <a href='http://www.cloudfoundry.org/getinvolved.html'>Get Involved</a>
                </li>
        </ul>
        <div class='copyright'>
          <div class='hr-horizontal-dark'></div>
          <br>
          <p>
            &copy;
            <script>
              //<![CDATA[
                var d = new Date();
                document.write(d.getFullYear());
              //]]>
            </script>
            IBM
          </p>
        </div><!-- End of copyright -->
      </div><!-- End of container-footer -->
    </div><!-- End of footer -->
    <script type="text/javascript">
      (function() {
        var didInit = false;
        function initMunchkin() {
          if(didInit === false) {
            didInit = true;
            Munchkin.init('625-IUJ-009');
          }
        }
        var s = document.createElement('script');
        s.type = 'text/javascript';
        s.async = true;
        s.src = document.location.protocol + '//munchkin.marketo.net/munchkin.js';
        s.onreadystatechange = function() {
          if (this.readyState == 'complete' || this.readyState == 'loaded') {
            initMunchkin();
          }
        };
        s.onload = initMunchkin;
        document.getElementsByTagName('head')[0].appendChild(s);
      })();
    </script>
  </body>
</html>
