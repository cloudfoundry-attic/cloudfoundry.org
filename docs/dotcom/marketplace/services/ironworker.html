<!doctype html>
<html>
  <head>
    <meta charset="utf-8">

    <!-- Always force latest IE rendering engine or request Chrome Frame -->
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">

    <!-- Use title if it's in the page YAML frontmatter -->
    <title>IronWorker</title>

    <link href="/stylesheets/master.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="/stylesheets/style.css" media="screen" rel="stylesheet" type="text/css" />
    <script src="/javascripts/all.js" type="text/javascript"></script>
    <link href='/images/favicon.ico' rel='shortcut icon'>
    <script type="text/javascript">
      $(document).ready(function(){
        $('a#search').click(function () {
          $('#organization_bar .navbar .nav>li a').css("padding","11px 20px 8px");
          $('#organization_bar .navbar .nav>li a#docs').css("padding","14px 20px");
          $('#organization_bar .navbar .nav>li a#search2').css("padding","11px 10px 8px");
          $('#search-on').show();
          $('#search-off').hide();
        });
        $('.cancel-x').click(function () {
          $('#organization_bar .navbar .nav>li a').css("padding","11px 63px 8px");
          $('#organization_bar .navbar .nav>li a#docs').css("padding","14px 20px");
          $('#organization_bar .navbar .nav>li a#search2, #organization_bar .navbar .nav>li a#search').css("padding","16px 20px 15px");
          $('#organization_bar .navbar .nav>li a#getinvolved').css("padding","11px 92px 8px");
          $('#organization_bar .navbar .nav>li#docs-off .docs-list-list a').css("padding","0");
          $('#search-on').hide();
          $('#search-off').show();
        });f
        $(".togglebutton").click(function () {
        var divname= this.value;
          $("#"+divname).show("slow").siblings().hide("slow");
        });
      });
    </script>

    <!--[if lt IE 9]>
    <style>
        #content .container-full {background:  #ebf0fa;}
        .call-to-contribute-box, .column-left, .column-middle, .column-right {background:#e3e8f2}
        #footer {background:#000;}
    </style>
    <![endif]-->
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-22181585-1']);
      _gaq.push(['_setDomainName', 'cloudfoundry.com']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </head>

  <body class="docs docs_dotcom docs_dotcom_marketplace docs_dotcom_marketplace_services docs_dotcom_marketplace_services_ironworker">
    <img id="bg" src="/images/bg-plain-x.jpg">
    <div id='non_footer'>
      <div id='content'>
            <div class="text-center" style="background: url(/images/bg-crowd.png);background-position:center bottom;background-repeat:no-repeat">
                <img src="/images/logo_org.png">
            </div>
          <br></br>
        <div class='container-full'>
          <div id='organization_bar'>
            <div class='navbar'>
              <ul class='nav'>
                            <li id='icon-home-li'>
                                <a id='icon-home-link' href='/'>
                                    <img id='icon-home' src='http://blog.cloudfoundry.com/wp-content/static/cforg/img/icon-home.png'>
                                </a>
                            </li>
                            <li>
                                <a id='about' href='http://www.cloudfoundry.org/about.html'>About</a>
                            </li>
                            <li>
                                <a id='learn' href='http://www.cloudfoundry.org/learn.html'>Learn</a>
                            </li>
                            <li>
                                <a href='http://www.cloudfoundry.org/documentation.html'>Documentation</a>
                            </li>
                            <li>
                                <a id='get-involved' href='http://www.cloudfoundry.org/getinvolved.html'>Get Involved</a>
                            </li>

                <li id='docs-off'>
                    <!--
                  <a href='/' id='docs'>
                    <div id='icon-docs'></div>
                  </a>
                     -->
                  <div id='docs-list'>
                    <div class="docs-list-list">
                      <a class="docs-list-th" href='/docs/using/app-arch/'>Using Cloud Foundry</a>
                      <br>
                      <a href="/docs/using/app-arch/">Application Architecture Considerations</a>
                      <br>
                      <a href='/docs/using/deploying-apps/'>Deploying Apps</a>
                      <br>
                      <a href='/docs/using/managing-apps/'>Managing Apps</a>
                      <br>
                      <a href='/docs/using/services.html'>Using Services</a>
                      <br>
                      <a class="docs-list-see-all" href="/docs/using/">See all</a>
                    </div><!-- End of 1st column docs-list-list-->
                    <div class="hr-vertical"></div>
                    <div class="docs-list-list">
                      <a class="docs-list-th" href='/docs/running/'>Running Cloud Foundry</a>
                      <br>
                      <a href='/docs/running/architecture/'>Architecture</a>
                      <br>
                      <a href='/docs/running/bosh/'>BOSH</a>
                      <br>
                      <a href='/docs/running/deploying-cf/'>Deploying with BOSH</a>
                      <br>
                      <a href='/docs/running/deploying-cf-with-chef/'>Deploying with Chef</a>
                      <br>
                      <a href='/docs/running/micro_cloud_foundry/'>Micro Cloud Foundry</a>
                      <br>
                      <a href='/docs/running/managing-cf/index.html'>Managing Cloud Foundry</a>
                      <br>
                      <a class="docs-list-see-all" href="/docs/running/">See all</a>
                    </div><!-- End of column 2 docs-list-list -->
                    <div class="hr-vertical"></div>
                    <div class="docs-list-list">
                      <a class="docs-list-th" href='/docs/reference/'>Reference</a>
                      <br>
                      <a href='/docs/reference/cc-api.html'>Cloud Foundry REST API</a>
                      <br>
                      <a class="docs-list-th" href='/docs/dotcom/'>CloudFoundry.com</a>
                      <br>
                      <a href='/docs/dotcom/integration/'>Technical Integration</a>
                      <br>
                      <a class="docs-list-th" href='/docs/community/'>Community</a>
                    </div><!-- End of column 3 docs-list-list -->
                  </div><!-- End of docs-list -->
                </li>
                  <!--
                <li id='search-off'>
                  <a id='search'>
                    <div class='icon-search'></div>
                  </a>
                </li>
                <li id='search-on'>
                  <a id='search2'>
                    <form action='http://www.cloudfoundry.com/search' class='search-form' method='get' onsubmit='return submitQuery()'>
                      <input autocomplete='off' class='search-input' id='search-query' name='q' onfocus="this.placeholder = ''" placeholder='' type='search' value=''>
                    </form>
                    <div class="cancel-x"></div>
                  </a>
                </li>
                  -->
              </ul>
            </div><!-- End of navbar -->
          </div><!-- End of organization_bar -->
          <div class='content_inner'>
            <a class="forkme" href="http://github.com/cloudfoundry/cf-docs" target="_blank">
              <img alt="Fork me on GitHub" src="/images/ribbon_forkme.png">
            </a>
            <form action='http://www.cloudfoundry.com/search' class='search-docs-form' method='get' onsubmit='return submitQuery()'>
              <input autocomplete='off' class='search-docs-input' id='search-query' name='q' onfocus="this.placeholder = 'more:docs '" placeholder='' type='search-docs' value='more:docs '>
            </form>
            <br clear="left">
            
              <div class="breadcrumbs">
                <ul>
                  <li>
                    <a href="/">Home</a>
                  </li>
                  <li class=""><a href="/docs/dotcom/">Pivotal CF Hosted</a></li> <li class=""><a href="/docs/dotcom/marketplace/">Marketplace</a></li> <li class=""><a href="/docs/dotcom/marketplace/services/">Services</a></li> <li class="active"><span>IronWorker</span></li>
                </ul>
              </div>
              <br clear="left">

			

              <div class="quick-links"><ul>
<li><a href="#managing">Managing Services</a></li>
<li><a href="#using">Using Service Instances with your Application</a></li>
<li><a href="#sample-app">Sample Applications</a></li>
<li><a href="#dashboard">Dashboard</a></li>
<li><a href="#support">Support</a></li>
</ul>
</div>

              <h1>IronWorker</h1>

            
            <p>IronWorker is a multi-language worker platform that runs tasks in the background, in parallel, and at massive scale.</p>

<h2><a id='managing'></a>Managing Services</h2>

<p><a href="/docs/using/services/managing-services.html">Managing services from the command line</a></p>

<h3>Creating a Service Instance</h3>

<p>An instance of this service can be provisioned via the CLI with the following command:</p>

<pre class="terminal">
$ cf create-service ironworker
</pre>
    

<h3>Binding Your Service Instance</h3>

<p>Bind the service instance to your app with the following command:</p>

<pre class="terminal">
$ cf bind-service 
</pre>

<h2><a id='using'></a>Using Service Instances with your Application</h2>

<ul>
<li>Include this section only if your service is bindable. What is the format of the credentials stored in the VCAP_SERVICES environment variable? *</li>
</ul>

<p>See <a href="/docs/dotcom/adding-a-service.html#using">Using Service Instances with your Application</a> and <a href="/docs/using/deploying-apps/environment-variable.html">VCAP_SERVICES Environment Variable</a>.</p>

<p>Format of credentials in <code>VCAP_SERVICES</code> environment variable.</p>
<pre class="highlight xml">{
  service-foo-n/a: [
    {
      name: &quot;service-foo-75efc&quot;,
      label: &quot;service-foo-n/a&quot;,
      plan: &quot;example-plan&quot;,
      credentials: {
        uri: dbtype://username:password@hostname:port/name
        hostname: &quot;foo.example.com&quot;
        port: &quot;1234&quot;
        name: &quot;asdfjasdf&quot;
        username: &quot;QvsXMbJ2rK&quot;,
        password: &quot;HCDVOYluTv&quot;
      }
    }
  ]
}
</pre>
<p>How to Get your Project ID and Token from Cloud Foundry</p>

<p>Add those values to a file called <code>iron.json</code> in your app root directory and add iron.json to your .gitignore file.</p>
<pre class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">&quot;project_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;123456789&quot;</span><span class="p">,</span><span class="w">
  </span><span class="s2">&quot;token&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;aslkdjflaksuilaks&quot;</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>
<h2>Ruby</h2>

<p>We’re going to need to install the Ruby gem, for development purposes:</p>

<pre class="terminal">
$ gem install worker_ng
</pre>

<p>If you’re building for a Rails application or anything that uses Bundler, add the following to your Gemfile:</p>
<pre class="highlight text">gem &#39;iron_worker_ng&#39;
</pre>
<h2>Create a worker</h2>

<p>First things first, let’s create a worker. Save the following code into a file called <code>hello_worker.rb</code>:</p>
<pre class="highlight text">puts &quot;Starting HelloWorker at #{Time.now}&quot;
puts &quot;Payload: #{params}&quot;
puts &quot;Simulating hard work for 5 seconds...&quot;
5.times do |i|
  puts &quot;Sleep #{i}...&quot;
  sleep 1
end
puts &quot;HelloWorker completed at #{Time.now}&quot;
</pre>
<p>Now create a file called <code>hello.worker</code> that defines your worker’s dependencies:</p>
<pre class="highlight text"># define the runtime language, this can be ruby, java, node, php, go, etc.
runtime &quot;ruby&quot;
# exec is the file that will be executed:
exec &quot;hello_worker.rb&quot;
</pre>
<p>Now upload it:</p>
<pre class="highlight text">#iron_worker upload hello
</pre>
<p>Now you’re work is ready to be used. You can quickly test it by running:</p>
<pre class="highlight text">iron_worker queue hello -p &quot;{\&quot;hello\&quot;: \&quot;world\&quot;}&quot;
</pre>
<p>Now you can view the log for the worker with:</p>
<pre class="highlight text">iron_worker log -t 4fcfc8d11bab475a360abd92
</pre>
<p>Or look at the log in HUD.</p>

<p>Now it’s time to put your worker to work!</p>

<h2>Queue up tasks for your worker from your application</h2>

<p>Now that we know the worker runs and uploads from your machine. Simply add the following to your <code>config/environments/development.rb</code>:</p>
<pre class="highlight text">ENV[&#39;IRON_WORKER_TOKEN&#39;] = &#39;YOUR TOKEN&#39;
ENV[&#39;IRON_WORKER_PROJECT_ID&#39;] = &#39;YOUR PROJECT ID&#39;
</pre>
<p>If you’re using bundler, add the following to your <code>Gemfile</code>:</p>

<p>Assuming you’re using Rails, let’s add some code to one of your controllers. For instance, let’s say you have a controller called <code>WelcomeController</code>:</p>
<pre class="highlight text">class WelcomeController &amp;lt; ApplicationController
  def index
    iron_worker = IronWorkerNG::Client.new
    iron_worker.tasks.create(&quot;hello&quot;, &quot;foo&quot;=&amp;gt;&quot;bar&quot;)
  end
end
</pre>
<h2><a id='sample-app'></a>Sample Applications</h2>

<p>Sample Apps in binary, dotnet, go, java, node, php, python, and ruby!</p>

<p><a href="https://github.com/iron-io/iron_worker_examples">IronWorker Examples on GitHub</a></p>

<h3>Next steps</h3>

<p>This is just the tip of the iceberg. IronWorker has a robust API that allows for a lot more interaction with your workers. You may want to try:</p>

<p>You can also check out some example workers:</p>

<ul>
<li>We have a [full repository][6] of IronWorker examples for Rails on Github.</li>
</ul>

<h3>Troubleshooting</h3>

<p>When trying to troubleshoot a worker, the best first step is to try and run the worker locally. If the worker runs locally, it should run on the cloud. You can also access your worker logs through the Iron.io HUD. These logs will show you any errors thrown or debug messages you log while the worker is running.</p>

<p>The most common source of worker errors is a mismatch between your local environment and the cloud’s environment. Double-check your <code>Gemfile</code> and your Ruby version – workers run under Ruby &gt;1.9. Also, make sure your <code>Gemfile.lock</code> has been updated. Run <code>bundle install</code> to make sure.</p>

<h2><a id='dashboard'></a>Dashboard</h2>

<p>You can view and analyze all your workers from the HUD&hellip;</p>

<p><img alt="ironworkers on the hud" src="http://www.iron.io/assets/screenshots/home-scrnshot-worker-1.png" /></p>

<h2>Share your projects with other people</h2>

<p>Each of your projects can be shared with coworkers and friends. It&#39;s easy and just takes a few seconds. They&#39;ll get an invite to signup for Iron.io for free and have automatic access to the project once completed.
<img alt="Sharing your Iron Worker Project" src="https://d2oawfjgoy88bd.cloudfront.net/523a211b2cdcf276fb5dae02/523a211c2cdcf276fb5dae04/528be904888b9d471f460281.png?Expires=1384987278&Signature=Bt8WG1evom8MFsh1rLSWqF2KFBK1c6l4tGWjuaTRMbw~jvDYBQY6QvdyCKB29Q2TkjvIb0n5rX9XvWWTEti5MFCJYKHwpKdjcdePk9vv0OhBU0vRCdfwotpPNemnkfQ5DvBBJXb7FxH3cWbN~3TiZnlmB0gMXlbnDtciLoakbgjkALTZsy1nBrAapUQ6VQWqjA9B6~Kb6gBTBP~2Ep8BN63970GtgR5ecBtx1OnsCFFrnFAodzfbUzcPj8AMONSsNjIowLbYPNP8OEePl89Z2U~lXQa7lcvWMAnlV8rzz6Ftvno5C8Ly~YS2C52N~3Zj9Lm-vD9QY4gX7M9-lzjoKg__&Key-Pair-Id=APKAJHEJJBIZWFB73RSA" /></p>

<h2><a id='support'></a>Support</h2>

<p>Provider Support Instructions</p>

<ul>
<li><a href="http:www.dev.iron.io">Dev Center</a></li>
<li><a href="http://get.iron.io/chat">Live Public Support</a></li>
<li><a href="https://github.com/iron-io">Iron.io on GitHub</a></li>
<li><a href="http://dev.iron.io/faq">Frequently Asked Questions</a></li>
<li><a href="https://github.com/iron-io/issues/issues">Report an Issue</a></li>
</ul>

          </div><!-- End of content_inner -->
        </div><!-- End of container-full -->
      </div><!-- End of content -->
    </div><!-- End of non_footer -->
    <div id='footer'>
      <div id='container-footer'>
        <div class='bg_social'>
          <ul class='social'>
            <li>
            <a href='http://twitter.com/cloudfoundry' target='_blank'>
            <img alt='Twitter' src='/images/twitter_large.png'>
            </a>
            </li>
            <li>
            <a href='https://plus.google.com/114245065906861739918/posts' target='_blank'>
            <img alt='Google+' src='/images/g+_large.png'>
            </a>
            </li>
            <li>
            <a href='http://facebook.com/cloudfoundry' target='_blank'>
            <img alt='Facebook' src='/images/facebook_large.png'>
            </a>
            </li>
            <li>
            <a href='http://youtube.com/cloudfoundry' target='_blank'>
            <img alt='Youtube' src='/images/youtube_large.png'>
            </a>
            </li>
          </ul>
        </div><!-- End of bg_social -->
        <ul class='links'>
                <li>
                    <a href='http://www.cloudfoundry.org/about.html'>About</a>
                </li>
                <li class='disc'>•</li>
                <li>
                    <a href='http://www.cloudfoundry.org/blog.html'>Blog</a>
                </li>
                <li class='disc'>•</li>
                <li>
                    <a href='http://www.cloudfoundry.org/about.html'>Partners</a>
                </li>
                <li class='disc'>•</li>
                <li>
                    <a href='http://www.cloudfoundry.org/documentation.html'>Docs</a>
                </li>
                <li class='disc'>•</li>
                <li>
                    <a href='http://www.cloudfoundry.org/faq.html'>FAQ</a>
                </li>
                <li class='disc'>•</li>
                <li>
                    <a href='http://www.cloudfoundry.org/getinvolved.html'>Get Involved</a>
                </li>
        </ul>
        <div class='copyright'>
          <div class='hr-horizontal-dark'></div>
          <br>
          <p>
            &copy;
            <script>
              //<![CDATA[
                var d = new Date();
                document.write(d.getFullYear());
              //]]>
            </script>
            IBM
          </p>
        </div><!-- End of copyright -->
      </div><!-- End of container-footer -->
    </div><!-- End of footer -->
    <script type="text/javascript">
      (function() {
        var didInit = false;
        function initMunchkin() {
          if(didInit === false) {
            didInit = true;
            Munchkin.init('625-IUJ-009');
          }
        }
        var s = document.createElement('script');
        s.type = 'text/javascript';
        s.async = true;
        s.src = document.location.protocol + '//munchkin.marketo.net/munchkin.js';
        s.onreadystatechange = function() {
          if (this.readyState == 'complete' || this.readyState == 'loaded') {
            initMunchkin();
          }
        };
        s.onload = initMunchkin;
        document.getElementsByTagName('head')[0].appendChild(s);
      })();
    </script>
  </body>
</html>
